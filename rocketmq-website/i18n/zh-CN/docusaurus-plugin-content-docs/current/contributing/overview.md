---
sidebar_position: 1
title: æ¦‚è¿°
---

# è´¡çŒ®æŒ‡å—æ¦‚è¿°

æ¬¢è¿æ¥åˆ° RocketMQ-Rust ç¤¾åŒºï¼ğŸ‰

æ„Ÿè°¢ä½ å¯¹ RocketMQ-Rust é¡¹ç›®çš„è´¡çŒ®å…´è¶£ã€‚æ— è®ºæ˜¯ä¿®å¤ bugã€æ·»åŠ æ–°åŠŸèƒ½è¿˜æ˜¯æ”¹è¿›æ–‡æ¡£ï¼Œæ¯ä¸€ä¸ªè´¡çŒ®éƒ½å¾ˆé‡è¦ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©ä½ å¼€å§‹è´¡çŒ®ä¹‹æ—…ã€‚

## è´¡çŒ®æ–¹å¼

æœ‰å¾ˆå¤šç§æ–¹å¼å¯ä»¥ä¸º RocketMQ-Rust åšå‡ºè´¡çŒ®ï¼š

### ä»£ç è´¡çŒ®

- **Bug ä¿®å¤**ï¼šä¿®å¤å·²æŠ¥å‘Šçš„é—®é¢˜
- **æ–°åŠŸèƒ½**ï¼šæ·»åŠ æ–°åŠŸèƒ½
- **æ€§èƒ½æ”¹è¿›**ï¼šä¼˜åŒ–ç°æœ‰ä»£ç 
- **æ–‡æ¡£**ï¼šæ”¹è¿›ä»£ç æ–‡æ¡£
- **æµ‹è¯•**ï¼šæ·»åŠ å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

### éä»£ç è´¡çŒ®

- **Bug æŠ¥å‘Š**ï¼šæŠ¥å‘Š bug å’Œé—®é¢˜
- **åŠŸèƒ½è¯·æ±‚**ï¼šå»ºè®®æ–°åŠŸèƒ½
- **æ–‡æ¡£**ï¼šæ”¹è¿›ç”¨æˆ·æ–‡æ¡£
- **ä»£ç å®¡æŸ¥**ï¼šå®¡æŸ¥æ‹‰å–è¯·æ±‚
- **ç¤¾åŒºæ”¯æŒ**ï¼šå¸®åŠ©å…¶ä»–ç”¨æˆ·

## å¼€å§‹è´¡çŒ®

### 1. Fork å’Œå…‹éš†

```bash
# åœ¨ GitHub ä¸Š Fork ä»“åº“
# å…‹éš†ä½ çš„ fork
git clone https://github.com/YOUR_USERNAME/rocketmq-rust.git
cd rocketmq-rust

# æ·»åŠ  upstream è¿œç¨‹ä»“åº“
git remote add upstream https://github.com/mxsm/rocketmq-rust.git
```

### 2. è®¾ç½®å¼€å‘ç¯å¢ƒ

```bash
# å®‰è£… Rust nightly å·¥å…·é“¾
rustup toolchain install nightly
rustup default nightly

# å®‰è£…å¼€å‘å·¥å…·
rustup component add rustfmt clippy

# æ„å»ºé¡¹ç›®
cargo build
```

### 3. åˆ›å»ºåˆ†æ”¯

```bash
# ä¸ upstream åŒæ­¥
git fetch upstream
git checkout main
git merge upstream/main

# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/your-feature-name
```

## å¼€å‘å·¥ä½œæµ

### è¿›è¡Œæ›´æ”¹

1. **ç¼–å†™ä»£ç **ï¼šéµå¾ªç¼–ç æ ‡å‡†
2. **æ·»åŠ æµ‹è¯•**ï¼šç¡®ä¿æµ‹è¯•è¦†ç›–ç‡
3. **æ ¼å¼åŒ–ä»£ç **ï¼šä½¿ç”¨ rustfmt
```bash
cargo fmt
```
4. **è¿è¡Œ linter**ï¼šä½¿ç”¨ clippy
```bash
cargo clippy -- -D warnings
```
5. **è¿è¡Œæµ‹è¯•**ï¼šç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
```bash
cargo test --all
```

### æäº¤æ›´æ”¹

ä½¿ç”¨æ¸…æ™°çš„æäº¤ä¿¡æ¯ï¼š

```
feat: æ·»åŠ äº‹åŠ¡æ¶ˆæ¯æ”¯æŒ

- å®ç° TransactionProducer
- æ·»åŠ äº‹åŠ¡ç›‘å¬å™¨ trait
- ä¸ºäº‹åŠ¡æ¶ˆæ¯æ·»åŠ å•å…ƒæµ‹è¯•

Closes #123
```

æäº¤ä¿¡æ¯æ ¼å¼ï¼š
- `feat:` æ–°åŠŸèƒ½
- `fix:` Bug ä¿®å¤
- `docs:` æ–‡æ¡£æ›´æ”¹
- `test:` æµ‹è¯•æ›´æ”¹
- `refactor:` ä»£ç é‡æ„
- `perf:` æ€§èƒ½æ”¹è¿›
- `chore:` æ„å»ºè¿‡ç¨‹æˆ–å·¥å…·

### æäº¤æ‹‰å–è¯·æ±‚

1. **æ¨é€åˆ°ä½ çš„ fork**ï¼š
```bash
git push origin feature/your-feature-name
```

2. **åˆ›å»ºæ‹‰å–è¯·æ±‚**ï¼šåœ¨ GitHub ä¸Š

3. **å¡«å†™ PR æ¨¡æ¿**ï¼š
   - æè¿°ä½ çš„æ›´æ”¹
   - å¼•ç”¨ç›¸å…³é—®é¢˜
   - å¦‚æœé€‚ç”¨ï¼Œæ·»åŠ æˆªå›¾

4. **ç­‰å¾…å®¡æŸ¥**ï¼šç»´æŠ¤è€…å°†å®¡æŸ¥ä½ çš„ PR

## ä»£ç å®¡æŸ¥æµç¨‹

### é¢„æœŸæƒ…å†µ

æˆ‘ä»¬çš„å®¡æŸ¥æµç¨‹æ—¨åœ¨ä¿æŒä»£ç è´¨é‡ï¼ŒåŒæ—¶å¯¹è´¡çŒ®è€…å‹å¥½ï¼š

1. **è‡ªåŠ¨æ£€æŸ¥**ï¼ˆ1-5 åˆ†é’Ÿï¼‰ï¼šCI è¿è¡Œæµ‹è¯•ã€linting å’Œæ ¼å¼æ£€æŸ¥
2. **äººå·¥å®¡æŸ¥**ï¼ˆ1-3 å¤©ï¼‰ï¼šç»´æŠ¤è€…å®¡æŸ¥ä½ çš„ä»£ç è´¨é‡å’Œè®¾è®¡
3. **åé¦ˆè®¨è®º**ï¼šåä½œè®¨è®ºä»¥æ”¹è¿›ä»£ç 
4. **æ‰¹å‡†å’Œåˆå¹¶**ï¼šä¸€æ—¦æ‰¹å‡†ï¼Œä½ çš„ PR å°†è¢«åˆå¹¶ï¼ğŸ‰

### å¤„ç†åé¦ˆ

ä»£ç å®¡æŸ¥æ˜¯å¯¹è¯ï¼Œè€Œéæ‰¹è¯„ã€‚å½“ä½ æ”¶åˆ°åé¦ˆæ—¶ï¼š

- å›åº”æ‰€æœ‰å®¡æŸ¥æ„è§ï¼ˆå³ä½¿æ˜¯ç¡®è®¤æ”¶åˆ°ï¼‰
- å¦‚æœæœ‰ä¸æ¸…æ¥šçš„åœ°æ–¹ï¼Œè¯·æé—®
- åšå‡ºè¯·æ±‚çš„æ›´æ”¹å¹¶æ¨é€åˆ°åŒä¸€åˆ†æ”¯
- å‡†å¤‡å¥½åè¯·æ±‚é‡æ–°å®¡æŸ¥
- ä¸è¦çŠ¹è±«è®¨è®ºæ›¿ä»£æ–¹æ¡ˆ

**æ³¨æ„**ï¼šCodeRabbit çš„å»ºè®®æ˜¯æœ‰å¸®åŠ©çš„å‚è€ƒï¼Œä½†æœ€ç»ˆå†³å®šç”±ç»´æŠ¤è€…åœ¨ä»£ç å®¡æŸ¥æœŸé—´åšå‡ºã€‚

## ç¼–ç æ ‡å‡†

è¯¦è§ [ç¼–ç æ ‡å‡†](./coding-standards) è·å–è¯¦ç»†æŒ‡å—ã€‚

### æ ¸å¿ƒåŸåˆ™

1. **éµå¾ª Rust æƒ¯ç”¨è¯­**ï¼šç¼–å†™åœ°é“çš„ Rust ä»£ç 
2. **é”™è¯¯å¤„ç†**ï¼šæ­£ç¡®ä½¿ç”¨ `Result` ç±»å‹
3. **æ–‡æ¡£**ï¼šä¸ºå…¬å…± API æ·»åŠ æ–‡æ¡£æ³¨é‡Š
4. **æµ‹è¯•**ï¼šç¼–å†™å…¨é¢çš„æµ‹è¯•
5. **æ€§èƒ½**ï¼šè€ƒè™‘æ€§èƒ½å½±å“

### ç¤ºä¾‹

```rust
//! å‘ RocketMQ broker å‘é€æ¶ˆæ¯çš„ç”Ÿäº§è€…æ¨¡å—ã€‚

use crate::error::{Error, Result};
use crate::model::Message;

/// ç”¨äºå‘é€æ¶ˆæ¯çš„ RocketMQ ç”Ÿäº§è€…ã€‚
///
/// # ç¤ºä¾‹
///
/// ```rust
/// use rocketmq::producer::Producer;
///
/// # async fn example() -> Result<(), Box<dyn std::error::Error>> {
/// let producer = Producer::new();
/// producer.start().await?;
/// # Ok(())
/// # }
/// ```
pub struct Producer {
    // å®ç°
}

impl Producer {
    /// åˆ›å»ºæ–°çš„ç”Ÿäº§è€…å®ä¾‹ã€‚
    pub fn new() -> Self {
        Self { /* ... */ }
    }

    /// å‘ broker å‘é€æ¶ˆæ¯ã€‚
    ///
    /// # é”™è¯¯
    ///
    /// ä»¥ä¸‹æƒ…å†µå°†è¿”å›é”™è¯¯ï¼š
    /// - broker ä¸å¯ç”¨
    /// - æ¶ˆæ¯è¶…è¿‡æœ€å¤§å¤§å°
    /// - å‘ç”Ÿç½‘ç»œè¶…æ—¶
    pub async fn send(&self, message: Message) -> Result<SendResult> {
        // å®ç°
    }
}
```

## å¼€å‘æŒ‡å—

è¯¦è§ [å¼€å‘æŒ‡å—](./development-guide) è·å–è¯¦ç»†ä¿¡æ¯ã€‚

## æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test --all

# è¿è¡Œç‰¹å®šæµ‹è¯•
cargo test test_send_message

# å¸¦è¾“å‡ºè¿è¡Œæµ‹è¯•
cargo test -- --nocapture

# å¹¶è¡Œè¿è¡Œæµ‹è¯•
cargo test --all -- --test-threads=4
```

### ç¼–å†™æµ‹è¯•

```rust
#[cfg(test)]
mod tests {
    use super::*;

    #[tokio::test]
    async fn test_send_message() {
        let producer = Producer::new();
        producer.start().await.unwrap();

        let message = Message::new("TestTopic".to_string(), b"Test".to_vec());
        let result = producer.send(message).await;

        assert!(result.is_ok());
    }
}
```

## æ–‡æ¡£

### æ„å»ºæ–‡æ¡£

```bash
# æ„å»ºæ–‡æ¡£
cargo doc --no-deps --open
```

### ç¼–å†™æ–‡æ¡£

```rust
/// ç®€è¦è¯´æ˜ï¼ˆä¸€å¥è¯ï¼‰
///
/// æ›´è¯¦ç»†çš„è§£é‡Šã€‚
///
/// # ç¤ºä¾‹
///
/// ```
/// use rocketmq::producer::Producer;
///
/// let producer = Producer::new();
/// ```
///
/// # é”™è¯¯
///
/// ä»¥ä¸‹æƒ…å†µæ­¤å‡½æ•°å°†è¿”å›é”™è¯¯...
///
/// # Panics
///
/// ä»¥ä¸‹æƒ…å†µæ­¤å‡½æ•°å°† panic...
pub fn public_function() -> Result<()> {
    // å®ç°
}
```

## è·å–å¸®åŠ©

æˆ‘ä»¬éšæ—¶æä¾›å¸®åŠ©ï¼è¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- **GitHub Issues**ï¼š[æŠ¥å‘Š bug æˆ–è¯·æ±‚åŠŸèƒ½](https://github.com/mxsm/rocketmq-rust/issues)
- **GitHub Discussions**ï¼š[æé—®å’Œåˆ†äº«æƒ³æ³•](https://github.com/mxsm/rocketmq-rust/discussions)
- **é‚®ä»¶**ï¼š[mxsm@apache.org](mailto:mxsm@apache.org)

## è®¸å¯è¯

RocketMQ-Rust é‡‡ç”¨ [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0) è®¸å¯ã€‚é€šè¿‡è´¡çŒ®ï¼Œä½ åŒæ„ä½ çš„è´¡çŒ®å°†ä½¿ç”¨ç›¸åŒçš„è®¸å¯è¯ã€‚

## è¡Œä¸ºå‡†åˆ™

æˆ‘ä»¬è‡´åŠ›äºä¸ºæ¯ä¸ªäººæä¾›ä¸€ä¸ªå‹å¥½å’ŒåŒ…å®¹çš„ç¯å¢ƒã€‚è¯·ï¼š

- åœ¨äº¤æµä¸­ä¿æŒå°Šé‡å’Œä½“è´´
- æ¬¢è¿æ–°æ¥è€…å¹¶å¸®åŠ©ä»–ä»¬å…¥é—¨
- ä¸“æ³¨äºå»ºè®¾æ€§åé¦ˆ
- å‡è®¾è‰¯å¥½çš„æ„å›¾
- å¼€æ”¾åä½œå¹¶åˆ†äº«çŸ¥è¯†

æˆ‘ä»¬éƒ½åœ¨è¿™é‡Œä¸€èµ·æ„å»ºä¼˜ç§€çš„è½¯ä»¶ï¼ğŸš€

## åç»­æ­¥éª¤

- [å¼€å‘æŒ‡å—](./development-guide) - è¯¦ç»†çš„å¼€å‘ä¿¡æ¯
- [ç¼–ç æ ‡å‡†](./coding-standards) - ä»£ç é£æ ¼æŒ‡å—
- [æŠ¥å‘Šé—®é¢˜](https://github.com/mxsm/rocketmq-rust/issues) - æäº¤ bug æˆ–åŠŸèƒ½è¯·æ±‚
